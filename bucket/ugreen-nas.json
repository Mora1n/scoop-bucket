{
  "version": "1.11.0",
  "description": "UGREEN NAS Desktop Client for Windows",
  "homepage": "https://www.ugnas.com/download",
  "license": "Proprietary",
  "notes": [
    "UGREEN NAS Windows desktop application",
    "Requires Windows 10 or later (64-bit)",
    "Download uses dynamic signed URLs from UGREEN API"
  ],
  "##": "Dummy URL - actual download happens in pre_install",
  "url": "https://github.com/.gitignore",
  "hash": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
  "pre_install": [
    "# Get dynamic download URL from UGREEN API",
    "$apiUrl = 'https://api-zh.ugnas.com/api/system/v1/ua/temp/link?appType=client&id=413'",
    "$response = Invoke-RestMethod -Uri $apiUrl -Method Get",
    "$downloadUrl = $response.data.linkData.tempUrl",
    "$exeFile = \"$dir\\dl.exe\"",
    "",
    "# Download the actual installer",
    "Write-Host \"Downloading UGREEN NAS installer from dynamic URL...\"",
    "Invoke-WebRequest -Uri $downloadUrl -OutFile $exeFile -UserAgent 'Scoop/1.0'",
    "",
    "# Remove dummy file",
    "Remove-Item \"$dir\\.gitignore\" -Force -ErrorAction SilentlyContinue"
  ],
  "installer": {
    "script": [
      "Remove-Item \"$dir\\Uninstall*.exe\" -Force -ErrorAction SilentlyContinue",
      "Expand-7ZipArchive \"$dir\\dl.exe\" \"$dir\" -Removal",
      "Expand-7ZipArchive \"$dir\\`$PLUGINSDIR\\app-64.7z\" \"$dir\" -Removal",
      "Remove-Item \"$dir\\`$PLUGINSDIR\" -Force -Recurse -ErrorAction SilentlyContinue"
    ]
  },
  "bin": [
    [
      "UGREEN NAS.exe",
      "ugnas"
    ]
  ],
  "shortcuts": [
    [
      "UGREEN NAS.exe",
      "UGREEN NAS"
    ]
  ],
  "checkver": {
    "url": "https://api.ugnas.com/api/system/v3/sa/apk",
    "jsonpath": "$.data.appSoftVers[?(@.appNo=='com.ugreenNasPro.win' && @.clientBit==2)]",
    "regex": "verName.*?v([\\d.]+).*?\"id\":(\\d+)"
  },
  "autoupdate": {
    "url": "https://github.com/.gitignore"
  }
}
